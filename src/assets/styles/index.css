@tailwind base;
@tailwind components;
@tailwind utilities;

/* iOS-specific fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS-specific fix for fixed positioning when keyboard is active */
  .ios-fixed-header {
    position: absolute !important;
    /* When keyboard is active, make sure header stays visible */
    transform: translateY(0) !important;
    top: 0 !important;
  }

  /* Prevent content from scrolling under fixed header */
  .ios-content {
    padding-top: 150px !important;
  }

  /* iOS Safari fix for position: fixed during keyboard input */
  @media (max-width: 767px) {
    body.keyboard-active {
      position: fixed;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
  }

  /* Ensure input remains in view when keyboard appears */
  input:focus {
    position: relative;
    z-index: 100;
  }
}

/* Slide transitions for entry details */
.slide-in {
  transform: translateX(0);
  transition: transform 0.3s ease-out;
}

.slide-out {
  transform: translateX(100%);
  transition: transform 0.3s ease-in;
}

/* Prevent main content scrolling when entry details are open */
body.entry-details-open {
  overflow: hidden;
}

/* Custom styles for dictionary entries */
.dictionary-entry,
.text-large .dictionary-entry {
  /* General text styling */
  font-size: 1rem;
  line-height: 1.6;
  transition: all 0.3s ease-in-out;
}

/* Handle italics and Hebrew/Aramaic text better */
.dictionary-entry i,
.dictionary-entry italic {
  font-style: italic;
  color: theme('colors.pink.700');
  font-weight: 500;
}

.dark .dictionary-entry i,
.dark .dictionary-entry italic {
  color: theme('colors.pink.400');
}

/* Better formatting for superscripts in references */
.dictionary-entry sup {
  font-size: 0.75em;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
  top: -0.5em;
}

/* Improved formatting for entry sections */
.dictionary-entry div {
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
}

/* Special formatting for Hebrew/Aramaic text */
.dictionary-entry span[lang="he"],
.dictionary-entry *[lang="he"] {
  font-family: "SBL Hebrew", "Times New Roman", serif;
  font-size: 1.15em;
}

/* Style cross-references */
.dictionary-entry reference {
  color: theme('colors.blue.600');
  text-decoration: underline;
  text-decoration-style: dotted;
  cursor: pointer;
}

.dark .dictionary-entry reference {
  color: theme('colors.blue.400');
}

/* Add proper spacing for abbreviations */
.dictionary-entry abbr {
  letter-spacing: 0.05em;
}

/* Main headword styling - make it stand out */
.dictionary-entry .font-bold.text-xl {
  font-size: 1.5rem;
  color: theme('colors.pink.700');
  margin-bottom: 0.5rem;
  letter-spacing: 0.02em;
  display: inline-block;
  border-bottom: 2px solid theme('colors.pink.200');
  padding-bottom: 0.25rem;
}

.dark .dictionary-entry .font-bold.text-xl {
  color: theme('colors.pink.400');
  border-bottom-color: theme('colors.pink.800');
}

/* Entry number styling */
.dictionary-entry .font-semibold.text-lg {
  color: theme('colors.blue.600');
  margin-right: 0.25rem;
  font-weight: 700;
}

.dark .dictionary-entry .font-semibold.text-lg {
  color: theme('colors.blue.400');
}

/* Binyan (verb form) headings */
.dictionary-entry .font-bold {
  margin-top: 1rem;
  color: theme('colors.indigo.700');
  background: theme('colors.indigo.50');
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  display: inline-block;
}

.dark .dictionary-entry .font-bold {
  color: theme('colors.indigo.300');
  background: theme('colors.indigo.900');
}

/* Add subtle highlighting for definitions */
.dictionary-entry span.font-semibold + span,
.dictionary-entry span.font-semibold + i {
  background-color: rgba(244, 114, 182, 0.08);
  border-radius: 0.25rem;
  padding: 0 0.25rem;
}

.dark .dictionary-entry span.font-semibold + span,
.dark .dictionary-entry span.font-semibold + i {
  background-color: rgba(244, 114, 182, 0.05);
}

/* Add visual separation between sections */
.dictionary-entry div + div,
.dictionary-entry span.font-semibold {
  margin-top: 1rem;
}

/* Add subtle box shadow and border to expanded entry container */
div[data-entry-id][class*="bg-white"] {
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
  border-left: 3px solid theme('colors.pink.500');
}

.dark div[data-entry-id][class*="bg-gray-800"] {
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  border-left: 3px solid theme('colors.pink.600');
}

/* Text size toggle styles - improved implementation */
.text-large .dictionary-entry {
  font-size: 1.8rem;
  line-height: 1.4;
}

.text-large .dictionary-entry span, 
.text-large .dictionary-entry div,
.text-large .dictionary-entry p {
  font-size: 1.8rem;
}

.text-large .dictionary-entry .font-bold.text-xl {
  font-size: 2.2rem;
}

.text-large .dictionary-entry .font-semibold.text-lg {
  font-size: 2rem;
}

.text-large .dictionary-entry i,
.text-large .dictionary-entry italic {
  font-size: 1.8rem;
}

.text-large .dictionary-entry sup {
  font-size: 1.2rem;
  top: -0.5em;
}

/* Fix for the search box text getting smaller */
.text-large input[type="search"],
.text-large input[type="text"] {
  font-size: 1.5rem !important; /* Force large text in search inputs */
}

.text-large input::placeholder {
  font-size: 1.5rem;
}

/* Ensure search button keeps proper size ratio with input */
.text-large .relative svg {
  width: 1.5rem;
  height: 1.5rem;
}

/* Ensure we don't mess with other UI elements */
.text-large button:not(.relative button),
.text-large select {
  font-size: inherit;
}